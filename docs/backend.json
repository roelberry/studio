{
  "entities": {
    "Artist": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Artist",
      "type": "object",
      "description": "Represents an artist or collective featured in the Indiana Arctivist Directory.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Artist entity."
        },
        "name": {
          "type": "string",
          "description": "The name of the artist or collective."
        },
        "profileImage": {
          "type": "string",
          "format": "uri",
          "description": "URL to the main image for the artist's card in the gallery, hosted on Firebase Storage."
        },
        "statement": {
          "type": "string",
          "description": "The artist's statement or 'About' section text."
        },
        "gallery": {
          "type": "array",
          "description": "A list of image URLs for the artist's profile gallery, hosted on Firebase Storage.",
          "items": {
            "type": "string",
            "format": "uri"
          }
        },
        "links": {
          "type": "array",
          "description": "A list of links to the artist's website, social media, or portfolio.",
          "items": {
            "type": "object",
            "properties": {
              "name": {
                "type": "string"
              },
              "url": {
                "type": "string",
                "format": "uri"
              }
            },
            "required": ["name", "url"]
          }
        },
        "tags": {
          "type": "array",
          "description": "A list of tags associated with the artist's work (e.g., 'Social Justice', 'Environmental Art').",
          "items": {
            "type": "string"
          }
        }
      },
      "required": [
        "id",
        "name",
        "profileImage",
        "statement",
        "gallery",
        "links",
        "tags"
      ]
    },
    "User": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "title": "User",
        "type": "object",
        "description": "Represents a user account in the system, with roles for authorization.",
        "properties": {
          "uid": {
            "type": "string",
            "description": "The unique identifier for the user, provided by Firebase Auth."
          },
          "email": {
            "type": "string",
            "format": "email",
            "description": "The user's email address."
          },
          "displayName": {
            "type": "string",
            "description": "The user's display name."
          },
          "role": {
            "type": "string",
            "description": "The user's role, used for authorization. Only 'admin' has write privileges.",
            "enum": ["admin"]
          }
        },
        "required": ["uid", "email"]
      }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/artists/{artistId}",
        "definition": {
          "entityName": "Artist",
          "schema": {
            "$ref": "#/backend/entities/Artist"
          },
          "description": "Stores artist data. Publicly readable, but write access is restricted to authenticated admin users.",
          "params": [
            {
              "name": "artistId",
              "description": "Unique identifier for the artist."
            }
          ]
        }
      },
      {
        "path": "/users/{userId}",
        "definition": {
          "entityName": "User",
          "schema": {
            "$ref": "#/backend/entities/User"
          },
          "description": "Stores user profile information, including roles for authorization. Write access is restricted to admins or the user themselves.",
          "params": [
            {
              "name": "userId",
              "description": "The user's UID from Firebase Auth."
            }
          ]
        }
      }
    ],
    "reasoning": "The Firestore structure is designed for simplicity and security. The `artists` collection is publicly readable for the gallery, but write operations are secured by rules that check for an admin role in the user's auth token. This prevents unauthorized modification of the directory. The `users` collection stores role information, which is critical for the security rules to function correctly."
  },
  "storage": {
    "rules": "storage.rules"
  }
}
