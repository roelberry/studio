{"version":3,"sources":["turbopack:///[project]/src/lib/data.ts"],"sourcesContent":["\nimport 'server-only';\nimport { collection, getDocs, doc, getDoc } from 'firebase/firestore';\nimport { initializeFirebase } from '@/firebase/index.server';\nimport type { Artist } from './types';\n\n// IMPORTANT: We must initialize Firebase within each function to ensure it's\n// only done when the function is actively called during server-side rendering.\n// Initializing it at the top level of the module can cause conflicts.\n\nexport async function getArtists(): Promise<Artist[]> {\n  const { firestore } = initializeFirebase();\n  const artistsCollection = collection(firestore, 'artists');\n  try {\n    const snapshot = await getDocs(artistsCollection);\n    if (snapshot.empty) {\n      return []; // Return empty array if Firestore is empty\n    }\n    const firestoreArtists = snapshot.docs.map(doc => ({ ...doc.data(), id: doc.id } as Artist));\n    return firestoreArtists;\n  } catch (error) {\n    console.error(\"Error fetching artists:\", error);\n    return []; // Return empty array on error\n  }\n}\n\nexport async function getArtistById(id: string): Promise<Artist | undefined> {\n  const { firestore } = initializeFirebase();\n  const docRef = doc(firestore, 'artists', id);\n  try {\n    const docSnap = await getDoc(docRef);\n\n    if (docSnap.exists()) {\n      return { id: docSnap.id, ...docSnap.data() } as Artist;\n    } else {\n      return undefined;\n    }\n  } catch (error) {\n      console.error(`Error fetching artist by ID \"${id}\":`, error);\n      return undefined;\n  }\n}\n"],"names":[],"mappings":"qUACA,EAAA,CAAA,CAAA,OACA,EAAA,CAAA,CAAA,OAAA,IAAA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAOO,eAAe,IACpB,GAAM,CAAE,WAAS,CAAE,CAAG,CAAA,EAAA,EAAA,kBAAA,AAAkB,IAClC,EAAoB,CAAA,EAAA,EAAA,UAAA,AAAU,EAAC,EAAW,WAChD,GAAI,CACF,IAAM,EAAW,MAAM,CAAA,EAAA,EAAA,OAAA,AAAO,EAAC,GAC/B,GAAI,EAAS,KAAK,CAChB,CADkB,KACX,EAAE,CAGX,CAHa,MAEY,AAClB,EAD2B,IAAI,CAAC,GAAG,CAAC,IAAQ,CAAE,CAAH,EAAM,EAAI,IAAI,EAAE,CAAE,GAAI,EAAI,EAAE,CAAC,CAAW,AAFlC,CAI1D,CAAE,MAAO,EAAO,CAEd,OADA,QAAQ,KAAK,CAAC,0BAA2B,GAClC,EACT,AADW,CAEb,CAFe,AAIR,eAAe,EAAc,CAAU,EAC5C,GAAM,OALqC,IAKnC,CAAS,CAAE,CAAG,CAAA,EAAA,EAAA,kBAAkB,AAAlB,IAChB,EAAS,CAAA,EAAA,EAAA,GAAA,AAAG,EAAC,EAAW,UAAW,GACzC,GAAI,CACF,IAAM,EAAU,MAAM,CAAA,EAAA,EAAA,MAAM,AAAN,EAAO,GAE7B,GAAI,EAAQ,MAAM,GAChB,CADoB,KACb,CAAE,GAAI,EAAQ,EAAE,CAAE,GAAG,EAAQ,IAAI,EAAE,AAAC,EAE3C,MAEJ,CAFW,AAET,MAAO,EAAO,CACZ,QAAQ,KAAK,CAAC,CAAC,6BAA6B,EAAE,EAAG,EAAE,CAAC,CAAE,GACtD,MACJ,CADW,AAEb"}