module.exports=[10179,a=>{"use strict";var b=a.i(87924),c=a.i(59501),d=a.i(95245),e=a.i(36570),f=a.i(50944),g=a.i(72131);a.i(69387);var h=a.i(60574);a.i(79597);var i=a.i(71559),j=a.i(99570),k=a.i(41921),l=a.i(66718),m=a.i(29246),n=a.i(91119),o=a.i(54614),p=a.i(5050),q=(0,p.createServerReference)("40850b7215435cdd9a13515828efca0dc20eed1b1a",p.callServer,void 0,p.findSourceMapURL,"addArtist"),r=(0,p.createServerReference)("4065b7b5a0adc46a393658dac1bb575cdd09b2ad0b",p.callServer,void 0,p.findSourceMapURL,"deleteArtist"),s=a.i(59564),t=a.i(16157),u=a.i(70106);let v=(0,u.default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),w=(0,u.default)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);var x=a.i(5084),y=a.i(50104),z=a.i(70121),A=a.i(97942),B=a.i(7554);g.forwardRef((a,c)=>{let{children:d,...e}=a,f=g.Children.toArray(d),h=f.find(E);if(h){let a=h.props.children,d=f.map(b=>b!==h?b:g.Children.count(a)>1?g.Children.only(null):g.isValidElement(a)?a.props.children:null);return(0,b.jsx)(C,{...e,ref:c,children:g.isValidElement(a)?g.cloneElement(a,void 0,d):null})}return(0,b.jsx)(C,{...e,ref:c,children:d})}).displayName="Slot";var C=g.forwardRef((a,b)=>{let{children:c,...d}=a;if(g.isValidElement(c)){var e;let a,f,h=(e=c,(f=(a=Object.getOwnPropertyDescriptor(e.props,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?e.ref:(f=(a=Object.getOwnPropertyDescriptor(e,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?e.props.ref:e.props.ref||e.ref),i=function(a,b){let c={...b};for(let d in b){let e=a[d],f=b[d];/^on[A-Z]/.test(d)?e&&f?c[d]=(...a)=>{f(...a),e(...a)}:e&&(c[d]=e):"style"===d?c[d]={...e,...f}:"className"===d&&(c[d]=[e,f].filter(Boolean).join(" "))}return{...a,...c}}(d,c.props);return c.type!==g.Fragment&&(i.ref=b?(0,z.composeRefs)(b,h):h),g.cloneElement(c,i)}return g.Children.count(c)>1?g.Children.only(null):null});C.displayName="SlotClone";var D=({children:a})=>(0,b.jsx)(b.Fragment,{children:a});function E(a){return g.isValidElement(a)&&a.type===D}var F="AlertDialog",[G,H]=(0,y.createContextScope)(F,[A.createDialogScope]),I=(0,A.createDialogScope)(),J=a=>{let{__scopeAlertDialog:c,...d}=a,e=I(c);return(0,b.jsx)(A.Root,{...e,...d,modal:!0})};J.displayName=F;var K=g.forwardRef((a,c)=>{let{__scopeAlertDialog:d,...e}=a,f=I(d);return(0,b.jsx)(A.Trigger,{...f,...e,ref:c})});K.displayName="AlertDialogTrigger";var L=a=>{let{__scopeAlertDialog:c,...d}=a,e=I(c);return(0,b.jsx)(A.Portal,{...e,...d})};L.displayName="AlertDialogPortal";var M=g.forwardRef((a,c)=>{let{__scopeAlertDialog:d,...e}=a,f=I(d);return(0,b.jsx)(A.Overlay,{...f,...e,ref:c})});M.displayName="AlertDialogOverlay";var N="AlertDialogContent",[O,P]=G(N),Q=g.forwardRef((a,c)=>{let{__scopeAlertDialog:d,children:e,...f}=a,h=I(d),i=g.useRef(null),j=(0,z.useComposedRefs)(c,i),k=g.useRef(null);return(0,b.jsx)(A.WarningProvider,{contentName:N,titleName:R,docsSlug:"alert-dialog",children:(0,b.jsx)(O,{scope:d,cancelRef:k,children:(0,b.jsxs)(A.Content,{role:"alertdialog",...h,...f,ref:j,onOpenAutoFocus:(0,B.composeEventHandlers)(f.onOpenAutoFocus,a=>{a.preventDefault(),k.current?.focus({preventScroll:!0})}),onPointerDownOutside:a=>a.preventDefault(),onInteractOutside:a=>a.preventDefault(),children:[(0,b.jsx)(D,{children:e}),(0,b.jsx)(Y,{contentRef:i})]})})})});Q.displayName=N;var R="AlertDialogTitle",S=g.forwardRef((a,c)=>{let{__scopeAlertDialog:d,...e}=a,f=I(d);return(0,b.jsx)(A.Title,{...f,...e,ref:c})});S.displayName=R;var T="AlertDialogDescription",U=g.forwardRef((a,c)=>{let{__scopeAlertDialog:d,...e}=a,f=I(d);return(0,b.jsx)(A.Description,{...f,...e,ref:c})});U.displayName=T;var V=g.forwardRef((a,c)=>{let{__scopeAlertDialog:d,...e}=a,f=I(d);return(0,b.jsx)(A.Close,{...f,...e,ref:c})});V.displayName="AlertDialogAction";var W="AlertDialogCancel",X=g.forwardRef((a,c)=>{let{__scopeAlertDialog:d,...e}=a,{cancelRef:f}=P(W,d),g=I(d),h=(0,z.useComposedRefs)(c,f);return(0,b.jsx)(A.Close,{...g,...e,ref:h})});X.displayName=W;var Y=({contentRef:a})=>{let b=`\`${N}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${N}\` by passing a \`${T}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${N}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return g.useEffect(()=>{document.getElementById(a.current?.getAttribute("aria-describedby"))||console.warn(b)},[b,a]),null},Z=a.i(68114);let $=g.forwardRef(({className:a,...c},d)=>(0,b.jsx)(M,{className:(0,Z.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...c,ref:d}));$.displayName=M.displayName;let _=g.forwardRef(({className:a,...c},d)=>(0,b.jsxs)(L,{children:[(0,b.jsx)($,{}),(0,b.jsx)(Q,{ref:d,className:(0,Z.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...c})]}));_.displayName=Q.displayName;let aa=({className:a,...c})=>(0,b.jsx)("div",{className:(0,Z.cn)("flex flex-col space-y-2 text-center sm:text-left",a),...c});aa.displayName="AlertDialogHeader";let ab=({className:a,...c})=>(0,b.jsx)("div",{className:(0,Z.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...c});ab.displayName="AlertDialogFooter";let ac=g.forwardRef(({className:a,...c},d)=>(0,b.jsx)(S,{ref:d,className:(0,Z.cn)("text-lg font-semibold",a),...c}));ac.displayName=S.displayName;let ad=g.forwardRef(({className:a,...c},d)=>(0,b.jsx)(U,{ref:d,className:(0,Z.cn)("text-sm text-muted-foreground",a),...c}));ad.displayName=U.displayName;let ae=g.forwardRef(({className:a,...c},d)=>(0,b.jsx)(V,{ref:d,className:(0,Z.cn)((0,j.buttonVariants)(),a),...c}));ae.displayName=V.displayName;let af=g.forwardRef(({className:a,...c},d)=>(0,b.jsx)(X,{ref:d,className:(0,Z.cn)((0,j.buttonVariants)({variant:"outline"}),"mt-2 sm:mt-0",a),...c}));af.displayName=X.displayName;var ag=a.i(33140);let ah=["image/jpeg","image/jpg","image/png","image/webp"],ai=e.instanceof(File).refine(a=>a.size>0,"Image is required.").refine(a=>a.size<=4194304,"Max file size is 4MB.").refine(a=>ah.includes(a.type),"Only .jpg, .jpeg, .png and .webp formats are supported."),aj=e.object({name:e.string().min(1,"Link name is required."),url:e.string().url("Please enter a valid URL.")}),ak=e.object({name:e.string().min(2,"Name must be at least 2 characters."),profileImage:ai,statement:e.string().min(10,"Statement must be at least 10 characters."),gallery:e.array(ai).min(1,"Please add at least one gallery image."),links:e.array(aj).optional(),tags:e.array(e.object({text:e.string().min(1)})).min(1,"Please add at least one tag.")});function al(){let{toast:a}=(0,o.useToast)(),e=(0,f.useRouter)(),p=(0,i.useFirestore)(),[u,y]=(0,g.useState)([]),[z,A]=(0,g.useState)(!0),B=(0,g.useRef)(null),C=(0,g.useRef)([]);(0,g.useEffect)(()=>{let a=(0,h.collection)(p,"artists"),b=(0,h.onSnapshot)(a,a=>{y(a.docs.map(a=>({id:a.id,...a.data()}))),A(!1)});return()=>b()},[p]);let D=(0,d.useForm)({resolver:(0,c.zodResolver)(ak),defaultValues:{name:"",statement:"",links:[{name:"",url:""}],tags:[{text:""}]}}),{fields:E,append:F,remove:G}=(0,d.useFieldArray)({control:D.control,name:"links"}),{fields:H,append:I,remove:L}=(0,d.useFieldArray)({control:D.control,name:"gallery"}),{fields:M,append:N,remove:O}=(0,d.useFieldArray)({control:D.control,name:"tags"});async function P(b){let c=new FormData;c.append("name",b.name),c.append("statement",b.statement),c.append("profileImage",b.profileImage),b.gallery.forEach(a=>{a.size>0&&c.append("gallery",a)}),b.links&&b.links.length>0&&b.links[0].name&&b.links[0].url&&c.append("links",JSON.stringify(b.links)),b.tags&&b.tags.length>0&&b.tags[0].text&&c.append("tags",JSON.stringify(b.tags));let d=await q(c);d.success?(a({title:"Success!",description:`Artist "${b.name}" has been added.`}),D.reset(),B.current&&(B.current.value=""),C.current.forEach(a=>{a&&(a.value="")}),D.reset({name:"",statement:"",links:[{name:"",url:""}],tags:[{text:""}],gallery:[],profileImage:void 0}),I(new File([],"")),N({text:""}),F({name:"",url:""})):a({variant:"destructive",title:"Uh oh! Something went wrong.",description:d.error||"There was a problem with your request."})}async function Q(b,c){let d=await r(b);d.success?a({title:"Artist Deleted",description:`"${c}" has been removed from the directory.`}):a({variant:"destructive",title:"Deletion Failed",description:d.error||"Could not remove the artist."})}return(0,b.jsxs)("div",{className:"max-w-4xl mx-auto space-y-8",children:[(0,b.jsxs)(n.Card,{children:[(0,b.jsxs)(n.CardHeader,{children:[(0,b.jsx)(n.CardTitle,{className:"text-3xl font-headline",children:"Add New Artist"}),(0,b.jsx)(n.CardDescription,{children:"This form adds a new artist to the Firestore database."})]}),(0,b.jsx)(n.CardContent,{children:(0,b.jsx)(k.Form,{...D,children:(0,b.jsxs)("form",{onSubmit:D.handleSubmit(P),className:"space-y-8",children:[(0,b.jsx)(k.FormField,{control:D.control,name:"name",render:({field:a})=>(0,b.jsxs)(k.FormItem,{children:[(0,b.jsx)(k.FormLabel,{children:"Artist/Collective Name"}),(0,b.jsx)(k.FormControl,{children:(0,b.jsx)(l.Input,{placeholder:"e.g., Jane Doe",...a})}),(0,b.jsx)(k.FormMessage,{})]})}),(0,b.jsx)(k.FormField,{control:D.control,name:"profileImage",render:({field:{onChange:a,value:c,...d}})=>(0,b.jsxs)(k.FormItem,{children:[(0,b.jsx)(k.FormLabel,{children:"Profile Image"}),(0,b.jsx)(k.FormControl,{children:(0,b.jsx)(l.Input,{type:"file",accept:"image/*",ref:B,onChange:b=>{let c=b.target.files?.[0];c&&a(c)},...d})}),(0,b.jsx)(k.FormDescription,{children:"The main image for the artist card."}),(0,b.jsx)(k.FormMessage,{})]})}),(0,b.jsx)(k.FormField,{control:D.control,name:"statement",render:({field:a})=>(0,b.jsxs)(k.FormItem,{children:[(0,b.jsx)(k.FormLabel,{children:"Artist Statement"}),(0,b.jsx)(k.FormControl,{children:(0,b.jsx)(m.Textarea,{placeholder:"A brief statement about the artist and their work...",rows:5,...a})}),(0,b.jsx)(k.FormMessage,{})]})}),(0,b.jsxs)("div",{children:[(0,b.jsx)(k.FormLabel,{children:"Gallery Images"}),(0,b.jsx)(k.FormDescription,{className:"mb-4",children:"Add images for the artist's gallery."}),H.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center gap-4 py-2",children:[(0,b.jsx)(k.FormField,{control:D.control,name:`gallery.${c}`,render:({field:{onChange:a,value:d,...e}})=>(0,b.jsxs)(k.FormItem,{className:"flex-1",children:[(0,b.jsx)(k.FormControl,{children:(0,b.jsx)(l.Input,{type:"file",accept:"image/*",ref:a=>C.current[c]=a,onChange:b=>{let c=b.target.files?.[0];c&&a(c)},...e})}),(0,b.jsx)(k.FormMessage,{})]})}),(0,b.jsx)(j.Button,{type:"button",variant:"ghost",size:"icon",onClick:()=>L(c),disabled:H.length<=1,children:(0,b.jsx)(t.MinusCircle,{className:"text-destructive"})})]},a.id)),(0,b.jsxs)(j.Button,{type:"button",variant:"outline",size:"sm",className:"mt-2",onClick:()=>I(new File([],"")),children:[(0,b.jsx)(s.PlusCircle,{className:"mr-2 h-4 w-4"}),"Add Image"]}),(0,b.jsx)(k.FormMessage,{children:D.formState.errors.gallery?.message||D.formState.errors.gallery?.root?.message})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(k.FormLabel,{children:"Tags"}),(0,b.jsx)(k.FormDescription,{className:"mb-4",children:"Add tags that describe the artist's work."}),M.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center gap-4 py-2",children:[(0,b.jsx)(k.FormField,{control:D.control,name:`tags.${c}.text`,render:({field:a})=>(0,b.jsxs)(k.FormItem,{className:"flex-1",children:[(0,b.jsx)(k.FormControl,{children:(0,b.jsx)(l.Input,{placeholder:"e.g., Social Justice",...a})}),(0,b.jsx)(k.FormMessage,{})]})}),(0,b.jsx)(j.Button,{type:"button",variant:"ghost",size:"icon",onClick:()=>O(c),disabled:M.length<=1,children:(0,b.jsx)(t.MinusCircle,{className:"text-destructive"})})]},a.id)),(0,b.jsxs)(j.Button,{type:"button",variant:"outline",size:"sm",className:"mt-2",onClick:()=>N({text:""}),children:[(0,b.jsx)(s.PlusCircle,{className:"mr-2 h-4 w-4"}),"Add Tag"]}),(0,b.jsx)(k.FormMessage,{children:D.formState.errors.tags?.message})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(k.FormLabel,{children:"Links"}),(0,b.jsx)(k.FormDescription,{className:"mb-4",children:"Add links to the artist's website, social media, etc."}),E.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center gap-4 py-2",children:[(0,b.jsx)(k.FormField,{control:D.control,name:`links.${c}.name`,render:({field:a})=>(0,b.jsxs)(k.FormItem,{className:"flex-1",children:[(0,b.jsx)(k.FormControl,{children:(0,b.jsx)(l.Input,{placeholder:"Link Name (e.g. Website)",...a})}),(0,b.jsx)(k.FormMessage,{})]})}),(0,b.jsx)(k.FormField,{control:D.control,name:`links.${c}.url`,render:({field:a})=>(0,b.jsxs)(k.FormItem,{className:"flex-1",children:[(0,b.jsx)(k.FormControl,{children:(0,b.jsx)(l.Input,{placeholder:"URL (e.g. https://...)",...a})}),(0,b.jsx)(k.FormMessage,{})]})}),(0,b.jsx)(j.Button,{type:"button",variant:"ghost",size:"icon",onClick:()=>G(c),disabled:E.length<=1&&""===D.getValues(`links.${c}.name`)&&""===D.getValues(`links.${c}.url`),children:(0,b.jsx)(t.MinusCircle,{className:"text-destructive"})})]},a.id)),(0,b.jsxs)(j.Button,{type:"button",variant:"outline",size:"sm",className:"mt-2",onClick:()=>F({name:"",url:""}),children:[(0,b.jsx)(s.PlusCircle,{className:"mr-2 h-4 w-4"}),"Add Link"]})]}),(0,b.jsx)(x.Separator,{}),(0,b.jsx)(j.Button,{type:"submit",disabled:D.formState.isSubmitting,children:D.formState.isSubmitting?"Submitting...":"Submit Artist"})]})})})]}),(0,b.jsx)(x.Separator,{}),(0,b.jsxs)(n.Card,{children:[(0,b.jsxs)(n.CardHeader,{children:[(0,b.jsx)(n.CardTitle,{className:"text-3xl font-headline",children:"Manage Artists"}),(0,b.jsx)(n.CardDescription,{children:"Edit or delete existing artists in the directory."})]}),(0,b.jsx)(n.CardContent,{children:z?(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)(ag.Skeleton,{className:"h-10 w-full"}),(0,b.jsx)(ag.Skeleton,{className:"h-10 w-full"}),(0,b.jsx)(ag.Skeleton,{className:"h-10 w-full"})]}):(0,b.jsx)("div",{className:"space-y-2",children:u.map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-2 rounded-lg hover:bg-muted",children:[(0,b.jsx)("span",{className:"font-medium",children:a.name}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)(j.Button,{variant:"outline",size:"icon",onClick:()=>e.push(`/admin/edit/${a.id}`),children:[(0,b.jsx)(w,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"sr-only",children:"Edit"})]}),(0,b.jsxs)(J,{children:[(0,b.jsx)(K,{asChild:!0,children:(0,b.jsxs)(j.Button,{variant:"destructive",size:"icon",children:[(0,b.jsx)(v,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"sr-only",children:"Delete"})]})}),(0,b.jsxs)(_,{children:[(0,b.jsxs)(aa,{children:[(0,b.jsx)(ac,{children:"Are you absolutely sure?"}),(0,b.jsxs)(ad,{children:['This action cannot be undone. This will permanently delete the artist "',a.name,'" from the directory.']})]}),(0,b.jsxs)(ab,{children:[(0,b.jsx)(af,{children:"Cancel"}),(0,b.jsx)(ae,{onClick:()=>Q(a.id,a.name),children:"Continue"})]})]})]})]})]},a.id))})})]})]})}a.s(["default",()=>al],10179)}];

//# sourceMappingURL=src_app_admin_page_tsx_645532da._.js.map