{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 82, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/firebase/config.ts"],"sourcesContent":["export const firebaseConfig = {\n  \"projectId\": \"studio-8522178126-1c4ba\",\n  \"appId\": \"1:1017820369346:web:339bb6f5e7f300435f865b\",\n  \"apiKey\": \"AIzaSyBDZLcI66ZFr-0n3omlm9NUhybvwaVaeck\",\n  \"authDomain\": \"studio-8522178126-1c4ba.firebaseapp.com\",\n  \"measurementId\": \"\",\n  \"messagingSenderId\": \"1017820369346\"\n};\n"],"names":[],"mappings":";;;;AAAO,MAAM,iBAAiB;IAC5B,aAAa;IACb,SAAS;IACT,UAAU;IACV,cAAc;IACd,iBAAiB;IACjB,qBAAqB;AACvB","debugId":null}},
    {"offset": {"line": 98, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/firebase/index.server.ts"],"sourcesContent":["\nimport 'server-only';\n\nimport { firebaseConfig } from '@/firebase/config';\nimport { initializeApp, getApps, getApp, FirebaseApp } from 'firebase/app';\nimport { getAuth } from 'firebase/auth';\nimport { getFirestore } from 'firebase/firestore'\nimport { getStorage } from 'firebase/storage';\n\n// IMPORTANT: DO NOT MODIFY THIS FUNCTION\nexport function initializeFirebase() {\n  if (!getApps().length) {\n    // Important! initializeApp() is called without any arguments because Firebase App Hosting\n    // integrates with the initializeApp() function to provide the environment variables needed to\n    // populate the FirebaseOptions in production. It is critical that we attempt to call initializeApp()\n    // without arguments.\n    let firebaseApp;\n    try {\n      // Attempt to initialize via Firebase App Hosting environment variables\n      firebaseApp = initializeApp();\n    } catch (e) {\n      // Only warn in production because it's normal to use the firebaseConfig to initialize\n      // during development\n      if (process.env.NODE_ENV === \"production\") {\n        console.warn('Automatic initialization failed. Falling back to firebase config object.', e);\n      }\n      firebaseApp = initializeApp(firebaseConfig);\n    }\n\n    return getSdks(firebaseApp);\n  }\n\n  // If already initialized, return the SDKs with the already initialized App\n  return getSdks(getApp());\n}\n\nexport function getSdks(firebaseApp: FirebaseApp) {\n  return {\n    firebaseApp,\n    auth: getAuth(firebaseApp),\n    firestore: getFirestore(firebaseApp),\n    storage: getStorage(firebaseApp),\n  };\n}\n"],"names":[],"mappings":";;;;;;AACA;AAEA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;;;;;;;AAGO,SAAS;IACd,IAAI,CAAC,IAAA,+KAAO,IAAG,MAAM,EAAE;QACrB,0FAA0F;QAC1F,8FAA8F;QAC9F,qGAAqG;QACrG,qBAAqB;QACrB,IAAI;QACJ,IAAI;YACF,uEAAuE;YACvE,cAAc,IAAA,qLAAa;QAC7B,EAAE,OAAO,GAAG;YACV,sFAAsF;YACtF,qBAAqB;YACrB;;YAGA,cAAc,IAAA,qLAAa,EAAC,2IAAc;QAC5C;QAEA,OAAO,QAAQ;IACjB;IAEA,2EAA2E;IAC3E,OAAO,QAAQ,IAAA,8KAAM;AACvB;AAEO,SAAS,QAAQ,WAAwB;IAC9C,OAAO;QACL;QACA,MAAM,IAAA,yMAAO,EAAC;QACd,WAAW,IAAA,iLAAY,EAAC;QACxB,SAAS,IAAA,kMAAU,EAAC;IACtB;AACF","debugId":null}},
    {"offset": {"line": 154, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/admin/actions.ts"],"sourcesContent":["'use server';\n\nimport { z } from 'zod';\nimport { collection, addDoc, doc, setDoc, deleteDoc, getDoc } from \"firebase/firestore\";\nimport { ref, uploadBytes, getDownloadURL, deleteObject } from \"firebase/storage\";\nimport { initializeFirebase } from '@/firebase/index.server';\nimport { revalidatePath } from 'next/cache';\nimport type { Artist } from '@/lib/types';\n\nconst { firestore, storage } = initializeFirebase();\n\nconst MAX_FILE_SIZE = 4 * 1024 * 1024; // 4MB\nconst ACCEPTED_IMAGE_TYPES = [\"image/jpeg\", \"image/jpg\", \"image/png\", \"image/webp\"];\n\nasync function uploadImage(file: File, artistName: string): Promise<string> {\n    const sanitizedName = artistName.replace(/[^a-zA-Z0-9]/g, '-').toLowerCase();\n    const fileName = `${sanitizedName}-${Date.now()}-${file.name}`;\n    const storageRef = ref(storage, `artists/${fileName}`);\n    const snapshot = await uploadBytes(storageRef, file);\n    const downloadURL = await getDownloadURL(snapshot.ref);\n    return downloadURL;\n}\n\nexport async function addArtist(formData: FormData) {\n  try {\n    const name = formData.get('name') as string;\n    const statement = formData.get('statement') as string;\n    const profileImage = formData.get('profileImage') as File;\n    const galleryFiles = formData.getAll('gallery').filter(f => (f as File).size > 0) as File[];\n    const links = formData.get('links') as string | null;\n    const tags = formData.get('tags') as string | null;\n\n    // --- Manual Server-Side Validation ---\n    if (!name || name.length < 2) {\n      return { success: false, error: 'Name must be at least 2 characters.' };\n    }\n    if (!statement || statement.length < 10) {\n      return { success: false, error: 'Statement must be at least 10 characters.' };\n    }\n    if (!profileImage || profileImage.size === 0) {\n      return { success: false, error: 'A profile image is required.' };\n    }\n    if (galleryFiles.length === 0) {\n      return { success: false, error: 'At least one gallery image is required.' };\n    }\n    // --- End Validation ---\n\n    const profileImageURL = await uploadImage(profileImage, name);\n\n    const galleryImageURLs = await Promise.all(\n        galleryFiles.map(file => uploadImage(file, name))\n    );\n    \n    const parsedLinks = links ? JSON.parse(links) : [];\n    const parsedTags = tags ? JSON.parse(tags).map((tag: { text: string }) => tag.text) : [];\n\n    const artistData = {\n        name,\n        statement,\n        profileImage: profileImageURL,\n        gallery: galleryImageURLs,\n        links: parsedLinks,\n        tags: parsedTags,\n    };\n    \n    const docRef = await addDoc(collection(firestore, \"artists\"), artistData);\n    \n    revalidatePath('/');\n    revalidatePath('/admin');\n    revalidatePath(`/artists/${docRef.id}`);\n\n    return { success: true };\n  } catch (error) {\n    const errorMessage = error instanceof Error ? error.message : \"An unknown error occurred.\";\n    console.error(\"Error adding artist: \", errorMessage);\n    // Ensure a JSON response is always sent on failure\n    return { success: false, error: `Failed to add artist: ${errorMessage}` };\n  }\n}\n\nexport async function updateArtist(id: string, formData: FormData, existingArtist: Artist) {\n  const name = formData.get('name') as string;\n  const statement = formData.get('statement') as string;\n  const links = formData.get('links') as string | null;\n  const tags = formData.get('tags') as string | null;\n\n  if (!name || name.length < 2) {\n    return { success: false, error: 'Name must be at least 2 characters.' };\n  }\n  if (!statement || statement.length < 10) {\n    return { success: false, error: 'Statement must be at least 10 characters.' };\n  }\n  \n  try {\n    const artistDocRef = doc(firestore, \"artists\", id);\n    const updatedData: Partial<Artist> = {\n      name,\n      statement,\n      links: links ? JSON.parse(links) : [],\n      tags: tags ? JSON.parse(tags).map((tag: { text: string }) => tag.text) : [],\n    };\n\n    const newProfileImage = formData.get('profileImage') as File | null;\n    if (newProfileImage && newProfileImage.size > 0) {\n      if (existingArtist.profileImage) {\n        try {\n          const oldImageRef = ref(storage, existingArtist.profileImage);\n          await deleteObject(oldImageRef);\n        } catch (storageError) {\n           console.warn(\"Could not delete old profile image, it may have already been removed:\", storageError);\n        }\n      }\n      updatedData.profileImage = await uploadImage(newProfileImage, name);\n    }\n    \n    const newGalleryImages = formData.getAll('gallery') as File[];\n    const existingGalleryUrls: string[] = JSON.parse(formData.get('existingGalleryUrls') as string || '[]');\n\n    const urlsToDelete = existingArtist.gallery.filter(url => !existingGalleryUrls.includes(url));\n    for (const url of urlsToDelete) {\n       try {\n        const oldImageRef = ref(storage, url);\n        await deleteObject(oldImageRef);\n      } catch (storageError) {\n         console.warn(`Could not delete old gallery image ${url}, it may have already been removed:`, storageError);\n      }\n    }\n    \n    const uploadedUrls = await Promise.all(\n      newGalleryImages\n        .filter(file => file.size > 0)\n        .map(file => uploadImage(file, name))\n    );\n\n    updatedData.gallery = [...existingGalleryUrls, ...uploadedUrls];\n\n\n    await setDoc(artistDocRef, updatedData, { merge: true });\n\n    revalidatePath('/');\n    revalidatePath('/admin');\n    revalidatePath(`/artists/${id}`);\n    \n    return { success: true };\n  } catch (error) {\n    const errorMessage = error instanceof Error ? error.message : \"An unknown error occurred.\";\n    console.error(\"Error updating artist:\", errorMessage);\n    return { success: false, error: `Failed to update artist: ${errorMessage}` };\n  }\n}\n\nasync function deleteImagesFromStorage(imageUrls: string[]) {\n    const deletePromises = imageUrls.map(async (url) => {\n        if (!url) return;\n        try {\n            const imageRef = ref(storage, url);\n            await deleteObject(imageRef);\n        } catch (error: any) {\n            if (error.code === 'storage/object-not-found') {\n                console.warn(`Image not found in storage, skipping delete: ${url}`);\n            } else {\n                console.error(`Failed to delete image from storage: ${url}`, error);\n            }\n        }\n    });\n    await Promise.all(deletePromises);\n}\n\nexport async function deleteArtist(artistId: string) {\n    const docRef = doc(firestore, \"artists\", artistId);\n    try {\n        // It's more robust to fetch the doc to get image URLs before deleting.\n        const artistDoc = await getDoc(docRef);\n        if (artistDoc.exists()) {\n            const artistData = artistDoc.data() as Artist;\n            // Delete all associated images from Firebase Storage\n            const imageUrlsToDelete = [artistData.profileImage, ...artistData.gallery].filter(Boolean);\n            if (imageUrlsToDelete.length > 0) {\n              await deleteImagesFromStorage(imageUrlsToDelete);\n            }\n        } else {\n           console.warn(`Artist document ${artistId} not found for deletion. Images in storage might be orphaned.`);\n        }\n\n        await deleteDoc(docRef);\n        \n        revalidatePath('/');\n        revalidatePath('/admin');\n        \n        return { success: true };\n    } catch (error) {\n        console.error(\"Error deleting artist:\", error);\n        return { success: false, error: \"Failed to delete artist.\" };\n    }\n}\n"],"names":[],"mappings":";;;;;;;;;AAGA;AAAA;AACA;AAAA;AACA;AACA;;;;;;;AAGA,MAAM,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,IAAA,wJAAkB;AAEjD,MAAM,gBAAgB,IAAI,OAAO,MAAM,MAAM;AAC7C,MAAM,uBAAuB;IAAC;IAAc;IAAa;IAAa;CAAa;AAEnF,eAAe,YAAY,IAAU,EAAE,UAAkB;IACrD,MAAM,gBAAgB,WAAW,OAAO,CAAC,iBAAiB,KAAK,WAAW;IAC1E,MAAM,WAAW,GAAG,cAAc,CAAC,EAAE,KAAK,GAAG,GAAG,CAAC,EAAE,KAAK,IAAI,EAAE;IAC9D,MAAM,aAAa,IAAA,2LAAG,EAAC,SAAS,CAAC,QAAQ,EAAE,UAAU;IACrD,MAAM,WAAW,MAAM,IAAA,mMAAW,EAAC,YAAY;IAC/C,MAAM,cAAc,MAAM,IAAA,sMAAc,EAAC,SAAS,GAAG;IACrD,OAAO;AACX;AAEO,eAAe,UAAU,QAAkB;IAChD,IAAI;QACF,MAAM,OAAO,SAAS,GAAG,CAAC;QAC1B,MAAM,YAAY,SAAS,GAAG,CAAC;QAC/B,MAAM,eAAe,SAAS,GAAG,CAAC;QAClC,MAAM,eAAe,SAAS,MAAM,CAAC,WAAW,MAAM,CAAC,CAAA,IAAK,AAAC,EAAW,IAAI,GAAG;QAC/E,MAAM,QAAQ,SAAS,GAAG,CAAC;QAC3B,MAAM,OAAO,SAAS,GAAG,CAAC;QAE1B,wCAAwC;QACxC,IAAI,CAAC,QAAQ,KAAK,MAAM,GAAG,GAAG;YAC5B,OAAO;gBAAE,SAAS;gBAAO,OAAO;YAAsC;QACxE;QACA,IAAI,CAAC,aAAa,UAAU,MAAM,GAAG,IAAI;YACvC,OAAO;gBAAE,SAAS;gBAAO,OAAO;YAA4C;QAC9E;QACA,IAAI,CAAC,gBAAgB,aAAa,IAAI,KAAK,GAAG;YAC5C,OAAO;gBAAE,SAAS;gBAAO,OAAO;YAA+B;QACjE;QACA,IAAI,aAAa,MAAM,KAAK,GAAG;YAC7B,OAAO;gBAAE,SAAS;gBAAO,OAAO;YAA0C;QAC5E;QACA,yBAAyB;QAEzB,MAAM,kBAAkB,MAAM,YAAY,cAAc;QAExD,MAAM,mBAAmB,MAAM,QAAQ,GAAG,CACtC,aAAa,GAAG,CAAC,CAAA,OAAQ,YAAY,MAAM;QAG/C,MAAM,cAAc,QAAQ,KAAK,KAAK,CAAC,SAAS,EAAE;QAClD,MAAM,aAAa,OAAO,KAAK,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,MAA0B,IAAI,IAAI,IAAI,EAAE;QAExF,MAAM,aAAa;YACf;YACA;YACA,cAAc;YACd,SAAS;YACT,OAAO;YACP,MAAM;QACV;QAEA,MAAM,SAAS,MAAM,IAAA,2KAAM,EAAC,IAAA,+KAAU,EAAC,WAAW,YAAY;QAE9D,IAAA,+IAAc,EAAC;QACf,IAAA,+IAAc,EAAC;QACf,IAAA,+IAAc,EAAC,CAAC,SAAS,EAAE,OAAO,EAAE,EAAE;QAEtC,OAAO;YAAE,SAAS;QAAK;IACzB,EAAE,OAAO,OAAO;QACd,MAAM,eAAe,iBAAiB,QAAQ,MAAM,OAAO,GAAG;QAC9D,QAAQ,KAAK,CAAC,yBAAyB;QACvC,mDAAmD;QACnD,OAAO;YAAE,SAAS;YAAO,OAAO,CAAC,sBAAsB,EAAE,cAAc;QAAC;IAC1E;AACF;AAEO,eAAe,aAAa,EAAU,EAAE,QAAkB,EAAE,cAAsB;IACvF,MAAM,OAAO,SAAS,GAAG,CAAC;IAC1B,MAAM,YAAY,SAAS,GAAG,CAAC;IAC/B,MAAM,QAAQ,SAAS,GAAG,CAAC;IAC3B,MAAM,OAAO,SAAS,GAAG,CAAC;IAE1B,IAAI,CAAC,QAAQ,KAAK,MAAM,GAAG,GAAG;QAC5B,OAAO;YAAE,SAAS;YAAO,OAAO;QAAsC;IACxE;IACA,IAAI,CAAC,aAAa,UAAU,MAAM,GAAG,IAAI;QACvC,OAAO;YAAE,SAAS;YAAO,OAAO;QAA4C;IAC9E;IAEA,IAAI;QACF,MAAM,eAAe,IAAA,wKAAG,EAAC,WAAW,WAAW;QAC/C,MAAM,cAA+B;YACnC;YACA;YACA,OAAO,QAAQ,KAAK,KAAK,CAAC,SAAS,EAAE;YACrC,MAAM,OAAO,KAAK,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,MAA0B,IAAI,IAAI,IAAI,EAAE;QAC7E;QAEA,MAAM,kBAAkB,SAAS,GAAG,CAAC;QACrC,IAAI,mBAAmB,gBAAgB,IAAI,GAAG,GAAG;YAC/C,IAAI,eAAe,YAAY,EAAE;gBAC/B,IAAI;oBACF,MAAM,cAAc,IAAA,2LAAG,EAAC,SAAS,eAAe,YAAY;oBAC5D,MAAM,IAAA,oMAAY,EAAC;gBACrB,EAAE,OAAO,cAAc;oBACpB,QAAQ,IAAI,CAAC,yEAAyE;gBACzF;YACF;YACA,YAAY,YAAY,GAAG,MAAM,YAAY,iBAAiB;QAChE;QAEA,MAAM,mBAAmB,SAAS,MAAM,CAAC;QACzC,MAAM,sBAAgC,KAAK,KAAK,CAAC,SAAS,GAAG,CAAC,0BAAoC;QAElG,MAAM,eAAe,eAAe,OAAO,CAAC,MAAM,CAAC,CAAA,MAAO,CAAC,oBAAoB,QAAQ,CAAC;QACxF,KAAK,MAAM,OAAO,aAAc;YAC7B,IAAI;gBACH,MAAM,cAAc,IAAA,2LAAG,EAAC,SAAS;gBACjC,MAAM,IAAA,oMAAY,EAAC;YACrB,EAAE,OAAO,cAAc;gBACpB,QAAQ,IAAI,CAAC,CAAC,mCAAmC,EAAE,IAAI,mCAAmC,CAAC,EAAE;YAChG;QACF;QAEA,MAAM,eAAe,MAAM,QAAQ,GAAG,CACpC,iBACG,MAAM,CAAC,CAAA,OAAQ,KAAK,IAAI,GAAG,GAC3B,GAAG,CAAC,CAAA,OAAQ,YAAY,MAAM;QAGnC,YAAY,OAAO,GAAG;eAAI;eAAwB;SAAa;QAG/D,MAAM,IAAA,2KAAM,EAAC,cAAc,aAAa;YAAE,OAAO;QAAK;QAEtD,IAAA,+IAAc,EAAC;QACf,IAAA,+IAAc,EAAC;QACf,IAAA,+IAAc,EAAC,CAAC,SAAS,EAAE,IAAI;QAE/B,OAAO;YAAE,SAAS;QAAK;IACzB,EAAE,OAAO,OAAO;QACd,MAAM,eAAe,iBAAiB,QAAQ,MAAM,OAAO,GAAG;QAC9D,QAAQ,KAAK,CAAC,0BAA0B;QACxC,OAAO;YAAE,SAAS;YAAO,OAAO,CAAC,yBAAyB,EAAE,cAAc;QAAC;IAC7E;AACF;AAEA,eAAe,wBAAwB,SAAmB;IACtD,MAAM,iBAAiB,UAAU,GAAG,CAAC,OAAO;QACxC,IAAI,CAAC,KAAK;QACV,IAAI;YACA,MAAM,WAAW,IAAA,2LAAG,EAAC,SAAS;YAC9B,MAAM,IAAA,oMAAY,EAAC;QACvB,EAAE,OAAO,OAAY;YACjB,IAAI,MAAM,IAAI,KAAK,4BAA4B;gBAC3C,QAAQ,IAAI,CAAC,CAAC,6CAA6C,EAAE,KAAK;YACtE,OAAO;gBACH,QAAQ,KAAK,CAAC,CAAC,qCAAqC,EAAE,KAAK,EAAE;YACjE;QACJ;IACJ;IACA,MAAM,QAAQ,GAAG,CAAC;AACtB;AAEO,eAAe,aAAa,QAAgB;IAC/C,MAAM,SAAS,IAAA,wKAAG,EAAC,WAAW,WAAW;IACzC,IAAI;QACA,uEAAuE;QACvE,MAAM,YAAY,MAAM,IAAA,2KAAM,EAAC;QAC/B,IAAI,UAAU,MAAM,IAAI;YACpB,MAAM,aAAa,UAAU,IAAI;YACjC,qDAAqD;YACrD,MAAM,oBAAoB;gBAAC,WAAW,YAAY;mBAAK,WAAW,OAAO;aAAC,CAAC,MAAM,CAAC;YAClF,IAAI,kBAAkB,MAAM,GAAG,GAAG;gBAChC,MAAM,wBAAwB;YAChC;QACJ,OAAO;YACJ,QAAQ,IAAI,CAAC,CAAC,gBAAgB,EAAE,SAAS,6DAA6D,CAAC;QAC1G;QAEA,MAAM,IAAA,8KAAS,EAAC;QAEhB,IAAA,+IAAc,EAAC;QACf,IAAA,+IAAc,EAAC;QAEf,OAAO;YAAE,SAAS;QAAK;IAC3B,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,0BAA0B;QACxC,OAAO;YAAE,SAAS;YAAO,OAAO;QAA2B;IAC/D;AACJ;;;IA3KsB;IAyDA;IAwFA;;AAjJA,+OAAA;AAyDA,+OAAA;AAwFA,+OAAA","debugId":null}},
    {"offset": {"line": 386, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/.next-internal/server/app/admin/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {addArtist as '40705d270ad4d1111c8918cd6834711aa09e9f651d'} from 'ACTIONS_MODULE0'\nexport {deleteArtist as '402fda32ad2da39a315ff171e4417d4cbe159b3d45'} from 'ACTIONS_MODULE0'\n"],"names":[],"mappings":";AAAA","debugId":null}}]
}